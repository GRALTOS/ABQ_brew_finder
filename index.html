<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="Albuquerque New Mexico, Micro-Brew or Microbrew, small batch beer and ale made by independently owned local breweries in and around Albuquerque. We help to locate and find breweries that are close by, near by, and closest to you.">
    <meta name="author" content="Stephen Gralton">
    <link rel="icon" href="../../favicon.ico">

    <title>ABQ Brew Finder</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap-3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="bootstrap-3.3.7/docs/assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="bootstrap-3.3.7/docs/assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom styles for this template -->
    <link href="carousel.css" rel="stylesheet">
  </head>
<!-- NAVBAR
================================================== -->
  <body>
    <div class="navbar-wrapper">
      <div class="container">

        <nav class="navbar navbar-inverse navbar-static-top">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="#map">ABQ Brew Finder</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <li class="active"><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contactus.html">Contact</a></li>
                
              </ul>
            </div>
          </div>
        </nav>

      </div>
    </div>


    <!-- Carousel
    ================================================== -->
    <div id="myCarousel" class="carousel slide" data-ride="carousel">
      <!-- Indicators -->
      <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
      </ol>
      <div class="carousel-inner" role="listbox">
        <div class="item active">
          <img class="first-slide" src="images/map.png" alt="First slide" id="carousel_img_map">
          <div class="container">
            <div class="carousel-caption" id="carousel-caption_map">
              <h1>Need a Beer?</h1>
              <p>Albuquerque is home to some of the best craft-brews in the country, and it seems that every week a new brewery is opening, or releasing a new brew. How is one supposed to keep track of this explosion of choice? ABQ-Brew-Finder is here to help!</p>
              <p><a class="btn btn-lg btn-primary" href="#map" role="button">Find a Brewery Near Me</a></p>
            </div>
          </div>
        </div>
        <div class="item">
          <img class="second-slide" src="images/trophy.jpg" alt="Brewery Of the Month!" id="carousel_img_blog">
          <div class="container">
            <div class="carousel-caption" id="carousel-caption_blog">
              <h1>Brewery of the Month!</h1>
              <p>Each month we pour over the numerous breweries in town and pick one to crowned 'Champion'!</p>
              <p><a class="btn btn-lg btn-primary" href="#brewery_othe_month" role="button">And the winner is...</a></p>
            </div>
          </div>
        </div>
        <div class="item">
          <img class="third-slide" src="images/beer.jpg" alt="The Brew Blog!" id="carousel_img_blog">
          <div class="container">
            <div class="carousel-caption" id="carousel-caption_blog">
              <h1>The Brew Blog</h1>
              <p>Whether you're a creature of habit, or a fan of all things new, I think we can agree that beer is awesome. And new beers from our beloved Micro-Breweries is what makes the world go 'round. Keep up to date with the latest and greatest with our New-Brew-Blog</p>
              <p><a class="btn btn-lg btn-primary" href="#new_brew_blog" role="button">Learn more</a></p>
            </div>
          </div>
        </div>
      </div>
      <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div><!-- /.carousel -->


    <!-- Marketing messaging and featurettes
    ================================================== -->
    <!-- Wrap the rest of the page in another container to center all the content. -->

    <div class="container marketing">

      <!-- Three columns of text below the carousel -->
      <div class="row">
        <div class="col-lg-4">
          <img class="img-circle" src="images/lawyer1.png" alt="Generic placeholder image" width="140" height="140">
          <h2>DUI?</h2>
          <p>Obtaining a knowledgeable, experienced Albuquerque DWI attorney is your most pressing concern when facing DWI charges. Previously, as a state prosecutor, Mr. Rasheed handled up to 100 DWI cases a week, which brings valuable skills and insight to your case</p>
          <p><a class="btn btn-default" href="http://www.rasheedlaw.com/" role="button">View details &raquo;</a></p>
        </div><!-- /.col-lg-4 -->
        <div class="col-lg-4">
          <img class="img-circle" src="images/abqaa.png" alt="Generic placeholder image" width="140" height="140">
          <h2>Need help with Drinking?</h2>
          <p>Do you or someone you know have a problem with alcohol or alcohol dependence? Don't wait, get help now! Alcoholics Anonymous of Albuquerque has many locations and meeting hours, and of course it is completely confidential. </p>
          <p><a class="btn btn-default" href="http://albuquerqueaa.org/" role="button">View details &raquo;</a></p>
        </div><!-- /.col-lg-4 -->
        <div class="col-lg-4">
          <img class="img-circle" src="images/taxi.png" alt="Generic placeholder image" width="140" height="140">
          <h2>Tavern Taxi</h2>
          <p>The program is funded through the Local DWI through a contract with the Albuquerque Cab Company. The program is in operation from 10 p.m. to 2 a.m. on Friday and Saturday nights at no charge. It is also in operation for special events and holidays with prior authorization. Just have your bartender or server call (505) 999-1400.</p>
          <p><a class="btn btn-default" href="http://www.bernco.gov/substance-abuse-programs/tavern-taxi.aspx" role="button">View details &raquo;</a></p>
        </div><!-- /.col-lg-4 -->
      </div><!-- /.row -->


      <!-- START THE FEATURETTES -->

      <hr class="featurette-divider">

      <div class="row featurette">
        <div class="col-md-7">
          <h2 class="featurette-heading">Find a brewery near you!</h2>
          <p class="lead">Our map feature will ask for your permission to locate you, and then display the breweries that are closest to you. Click on the Show Breweries button to get started.</p>
          <a class="btn btn-sm btn-primary" id="show-breweries"role="button">Show Breweries</a>
          <a class="btn btn-sm btn-primary" id="hide-breweries"role="button">Hide Breweries</a>
          <a class="btn btn-sm btn-primary" id="show-near-by"role="button">Find near-by Breweries</a>
        </div>
        <div class="col-md-5">
        <div class="featurette-image img-responsive center-block" id="map" > </div></div> 
      </div>
<script>
      styles = [{"elementType":"geometry","stylers":[{"hue":"#ff4400"},{"saturation":-68},{"lightness":-4},{"gamma":0.72}]},{"featureType":"road","elementType":"labels.icon"},{"featureType":"landscape.man_made","elementType":"geometry","stylers":[{"hue":"#0077ff"},{"gamma":3.1}]},{"featureType":"water","stylers":[{"hue":"#00ccff"},{"gamma":0.44},{"saturation":-33}]},{"featureType":"poi.park","stylers":[{"hue":"#44ff00"},{"saturation":-23}]},{"featureType":"water","elementType":"labels.text.fill","stylers":[{"hue":"#007fff"},{"gamma":0.77},{"saturation":65},{"lightness":99}]},{"featureType":"water","elementType":"labels.text.stroke","stylers":[{"gamma":0.11},{"weight":5.6},{"saturation":99},{"hue":"#0091ff"},{"lightness":-86}]},{"featureType":"transit.line","elementType":"geometry","stylers":[{"lightness":-48},{"hue":"#ff5e00"},{"gamma":1.2},{"saturation":-23}]},{"featureType":"transit","elementType":"labels.text.stroke","stylers":[{"saturation":-64},{"hue":"#ff9100"},{"lightness":16},{"gamma":0.47},{"weight":2.7}]}]
      var map;

      // Create a new blank array for all the brewery markers.
      var markers = [];

      function initMap() {
        var myLatlng = {lat: 35.1054925422785, lng: -106.647530693516};
		
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) 
            { var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
              };
              map.setCenter(pos);
              var marker = new google.maps.Marker({
            position: pos,
            map: map,
            title: 'Your Location'
        });

          }, function() {
            handleLocationError(true, infoWindow, map.getCenter());
          });
    } 
        // Constructor creates a new map - only center and zoom are required.
        map = new google.maps.Map(document.getElementById('map'), {
          center: myLatlng,
          zoom: 11,
          styles: styles,
      mapTypeControl: true
      
        }); //getElementById closing Bracket.



    // Below is an array object with listings for all the breweries my site will start with.
    //    It is possible to store these in database and call it as needed, but I don't
    //    have a DB to work with.

      var locations = [
      
      {title: 'Lizard Tail Brewing', location: {lat: 35.129350, lng: -106.532424}, type: 'brewery'},
      {title: 'Bosque Brewing Co.', location: {lat: 35.186664, lng: -106.586001}, type: 'brewery'},
      {title: 'Bosque Brewing Co. (Nob Hill)', location: {lat: 35.080138, lng: -106.613055}, type: 'brewery'},
      //{title: 'Bosque Brewing Co. (Las Cruces)', location: {lat: 32.283932, lng: -106.758218}, type: 'brewery'},
      {title: 'Chama River Brewery', location: {lat: 35.139455, lng: -106.599404}, type: 'brewery'},
      {title: 'Albuquerque Brewing Company', location: {lat: 35.182475, lng: -106.581103}, type: 'brewery'},
      {title: 'Nexus Brewery', location: {lat: 35.133707, lng: -106.606324}, type: 'brewery'},
      {title: 'La Cumbre Brewing Co.', location: {lat: 35.117807, lng: -106.614117}, type: 'brewery'},
      {title: 'Marble Downtown', location: {lat: 35.092820, lng: -106.646719}, type: 'brewery'},
      {title: 'Marble (Westside)', location: {lat: 35.215807, lng: -106.698212}, type: 'brewery'},
      {title: 'Red Door Brewing Co. (Candelaria Taproom)', location: {lat: 35.115874, lng: -106.629132}, type: 'brewery'},
      {title: 'Red Door Brewing Co. (Downtown Taproom)', location: {lat: 35.083322, lng: -106.652233}, type: 'brewery'},
      {title: 'Boxing Bear Brewing Co. (Corrales)', location: {lat: 35.203562, lng: -106.645878}, type: 'brewery'},
      {title: 'Starr Brothers Brewing', location: {lat: 35.159119, lng: -106.580329}, type: 'brewery'}
        ];

      var largeInfowindow = new google.maps.InfoWindow();
      var bounds = new google.maps.LatLngBounds();


      // The following group uses the location array to create an array of markers on initialize.
      for (var i = 0; i < locations.length; i++) {
        // get positions from the locations array
        var position = locations[i].location;
        var title = locations[i].title;
        var iconBase = 'https://maps.google.com/mapfiles/kml/shapes/';
        // create a marker per location, and put markers in to an array

        var marker = new google.maps.Marker({
          position: position,
          title: title,
          animation: google.maps.Animation.DROP,
          icon: 'images/brew.png',
          id: i
        });

        // push the markers to the array of markers
        markers.push(marker);
        
        // Create an onclick event listener to open an infowindow at each marker.
        marker.addListener('click', function() {
          populateInfoWindow(this, largeInfowindow);
        });
        bounds.extend(markers[i].position);
      } // for-loop closing brace.

      // Extend the bounds of the map to accomodate the markers.      


      //Event Listeners for show/hide buttons on the map.
      document.getElementById('show-breweries').addEventListener('click', showBreweries);
      document.getElementById('hide-breweries').addEventListener('click', hideBreweries);
      document.getElementById('show-near-by').addEventListener('click', nearByBreweries);
      /*var e = document.getElementById('map');
        e.onmouseover = function() {
            document.getElementById('map').style.height = '800';
        }
        e.onmouseout = function() {
            document.getElementById('map').style.display = '400';
        }*/

      } //function initMap closing bracket.






      // This function populates the infowindow when the marker is clicked.
      // we will only have one window open, and it will be located at the marker that was clicked.
      function populateInfoWindow(marker, infowindow) {
        // check to make sure the infowindow is not already open on this marker
        if (infowindow.marker != marker) {
          infowindow.marker = marker;
          infowindow.setContent('<div>' + marker.title + '</div>');
          infowindow.open(map, marker);
          // make sure the marker property is cleared if the infowindow is closed
          infowindow.addListener('closeclick',function(){
            infowindow.setMarker(null);
          });
          
          var streetViewService = new google.maps.StreetViewService();
          var radius = 50;

          // In case status is OK, which means the pano was found, compute the
          // position of the street view image, then calculate the heading, then get a
          // panorama from that and set the options.
          function getStreetView(data, status) {
            if (status == google.maps.StreetViewStatus.OK) {
              var nearStreetViewLocation = data.location.latLng;
              var heading = google.maps.geometry.spherical.computeHeading(nearStreetViewLocation, marker.position);
              infowindow.setContent('<div>' + marker.title + '</div><div id="pano"></div>');
              var panoramaOptions = {
                position: nearStreetViewLocation,
                pov: {
                  heading: heading,
                  pitch: 30
                }
              };
            var panorama = new google.maps.StreetViewPanorama(document.getElementById('pano'), panoramaOptions);
            } else {
              infowindow.setContent('<div>' + marker.title + '</div>' + '<div>No Street View Found</div>');
            } //else close brace

          } // function getStreetView() close brace.

          // Use streetview service to get the closest streetview image within 50
          // meters of the markers position.
          streetViewService.getPanoramaByLocation(marker.position, radius, getStreetView);

          // Open the infowindow on the correct marker.
          infowindow.open(map, marker);

        } //if-close brace.
      }  // function populateInfoWindwo() close brace.

      function showBreweries() {
        var bounds = new google.maps.LatLngBounds();
        // Extend the boundaries of the map for each marker and display the marker
        for (var i = 0; i < markers.length; i++) {
          markers[i].setMap(map);
          bounds.extend(markers[i].position);
          animation: google.maps.Animation.DROP;
        }
        map.fitBounds(bounds);


      }

      // This function loops through the breweries and will hide them all.
      function hideBreweries() {
        for (var i = 0; i < markers.length; i++) {
          markers[i].setMap(null);
        }
      }
      // This function will compare the lat/lon of user, and find 5 closest breweries.
      //
      // the Users location is stored like this: var pos = {lat: position.coords.latitude, lng: position.coords.longitude};
      // the Breweries location is stored like: var locations = [{title: 'Lizard Tail Brewing', location: {lat: 35.129350, lng: -106.532424}, type: 'brewery'}];
      // 

    function nearByBreweries() {
		var startingPoint = [];
		 if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position){ 
			startingPoint = [{
				lat: position.coords.latitude, 
				lng: position.coords.longitude
				}];
			});
		}
		var stufftest = google.maps.geometry.spherical.computeDistanceBetween(startingPoint, locations[3].location);
		alert ("yo");
        };
	
			



    </script>


      <hr class="featurette-divider" id="brewery_othe_month">

      <div class="row featurette">
        <div class="col-md-7 col-md-push-5">
          <h2 class="featurette-heading">Our Brewery of the Month! <br><span class="text-muted">Starr Brothers <small>(August)</small></span></h2>
          <p class="lead">Starr Brothers' Head Brewer is Rob Whitlock. Rob is one of the Dharma project scientists from Lost, and has been brewing beer since he was first stranded on the island in 1962. His attention to detail and dedication to results are topped only by his visionary taste and style. </p>
        </div>
        <div class="col-md-5 col-md-pull-7" id="starrdiv">
          <img class="featurette-image img-responsive center-block" src="images/starrbrothers.jpg" alt="Starr Brothers Logo">
        </div>
      </div>

      <hr class="featurette-divider">

      <div class="row featurette">
        <div class="col-md-7">
          <h2 id="new_brew_blog" class="featurette-heading">THE Brew Blog <span class="text-muted">... not 'a' blog, it's like, the ONE!</span></h2>
          <p class="lead">Drinking beer is the best. Second to none! However, talking about beer and sharing news about new breweries is a close second. Click over to join in on the beer-talk!</p>
        </div>
        <div class="col-md-5">
          <img class="featurette-image img-responsive center-block" src="images/friendsandbeer.jpg" alt="Generic placeholder image">
        </div>
      </div>

      <hr class="featurette-divider">

      <!-- /END THE FEATURETTES -->


      <!-- FOOTER -->
      <footer>
        <p class="pull-right"><a href="#">Back to top</a></p>
        <p>&copy; 2016 Robot Potato, Inc. &middot; <a href="privacy-statement.doc">Privacy</a> &middot; <a href="website-terms-and-conditions.doc">Terms</a></p>
      </footer>

    </div><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?libraries=geometry&key=AIzaSyC7g2GaTrXHzZtxNsoZtRXt3ls0Rfx3UBM&v=3&callback=initMap">
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="bootstrap-3.3.7/docs/assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="bootstrap-3.3.7/dist/js/bootstrap.min.js"></script>
    <!-- Just to make our placeholder images work. Don't actually copy the next line! -->
    <script src="bootstrap-3.3.7/docs/assets/js/vendor/holder.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="bootstrap-3.3.7/docs/assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
